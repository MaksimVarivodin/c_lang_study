1.5.2. Подсчет символов

Следующая программа занимается подсчетом символов; она имеет много сходных черт с программой копирования.

```c
#include <stdio.h>

/* подсчет вводимых символов; 1-я версия */
int main() {
    long nc;
    nc = 0;
    while (getchar() != EOF)
        ++nc;
    printf("%ld\n", nc);
    return 0;
}
```

Инструкция `++nc;` представляет новый оператор `++`, который означает увеличить на единицу. Вместо этого можно было бы
написать `nc = nc + 1`, но `++nc` намного короче, а часто и эффективнее. Существует аналогичный оператор `--`,
означающий уменьшить на единицу. Операторы `++` и `--` могут быть как префиксными (`++nc`), так и постфиксными (`nc++`).
Как будет показано в главе 2, эти две формы в выражениях имеют разные значения, но `++nc` и `nc++` добавляют к `nc`
единицу. В данном случае мы остановились на префиксной записи.

Программа подсчета символов накапливает сумму в переменной типа `long`. Целые типа `long` имеют неменее 32 битов. Хотя
на некоторых машинах типы `int` и `long` имеют одинаковый размер, существуют, однако, машины, в которых `int` занимает
16 битов с максимально возможным значением 32767, а это — сравнительно маленькое число, и счетчик типа `int` может
переполниться. Спецификация `%ld` в `printf` указывает, что соответствующий аргумент имеет тип `long`.

Возможно охватить еще больший диапазон значений, если использовать тип `double` (т. е. `float` с двойной точностью).
Применим также инструкцию `for` вместо `while`, чтобы продемонстрировать другой способ написания цикла.

```c
#include <stdio.h>

/* подсчет вводимых символов; 2-я версия */
int main() {
    double nc;
    for (nc = 0; getchar() != EOF; ++nc);
    printf("%.0f\n", nc);
    return 0;
}
```

В `printf` спецификатор `%f` применяется как для `float`, так и для `double`; спецификатор `%0.f` означает печать без
десятичной точки и дробной части (в нашем случае отсутствует).

Тело указанного `for`-цикла пусто, поскольку кроме проверок и приращений счетчика делать ничего ненужно. Но правила
грамматики Си требуют, чтобы `for`-цикл имел тело. Выполнение этого требования обеспечивает изолированную точку с
запятой, называемую пустой инструкцией. Мы поставили точку с запятой на отдельной строке для большей наглядности.

Наконец, заметим, что если ввод не содержит ни одного символа, то при первом же обращении к `getchar` условие в `while`
или `for` не будет выполнено и программа выдаст нуль, что и будет правильным результатом. Это важно. Одно из
привлекательных свойств циклов `while` и `for` состоит в том, что условие проверяется до того, как выполняется тело
цикла. Если ничего делать не надо, то ничего делаться и не будет, пусть даже тело цикла не выполнится ни разу. Программа
должна вести себя корректно и при нулевом количестве вводимых символов. Само устройство циклов `while` и `for` дает
дополнительную уверенность в правильном поведении программы в случае граничных условий.

